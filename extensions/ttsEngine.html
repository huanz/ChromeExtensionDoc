<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="cleartype" content="on">
    <link type="image/ico" rel="icon" href="https://www.google.com/images/icons/product/chrome-32.png">

    <link href="../static/css/out/site.css" rel="stylesheet" type="text/css">
    <link href="../static/css/print.css" rel="stylesheet" type="text/css" media="print">
    <link href="../static/css/prettify.css" rel="stylesheet" type="text/css">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700%7CSource+Code+Pro' rel='stylesheet' type='text/css'>
    <title>chrome.ttsEngine - Google Chrome 扩展程序开发文档（非官方中文版）</title>
  </head>

  <body>
    <div id="gc-container">
    <a href="ttsEngine.html#gc-pagecontent" class="element-invisible element-focusable">Skip to main content</a>

    <header id="topnav" role="banner">
      <div id="logo">
        <a href="index.html" id="goto-original">
          <img alt="Chrome 开发者" src="../static/images/chrome-logo_2x.png">
        </a>
        <span class="collase-icon"><!-- <img src="/static/images/burger-icon.png" class="collase-icon">--></span>
      </div>
      <nav id="fatnav" role="navigation">
      <ul>
          <li class="pillar">
            <span class="toplevel">应用</span>
            <ul class="expandee">
                <li class="submenu">了解基础知识
                  <ul>
                      <li class="category">
                        <a href="../apps/about_apps.html">
                        什么是 Chrome 应用？
                        </a>
                        <ul>
                        </ul>
                      </li>
                      <li class="category">
                        <a href="../apps/first_app.html">
                        创建第一个应用
                        </a>
                        <ul>
                        </ul>
                      </li>
                      <li class="category">
                        <a href="../apps/app_architecture.html">
                        应用的架构
                        </a>
                        <ul>
                        </ul>
                      </li>
                      <li class="category">
                        <a href="../apps/app_lifecycle.html">
                        应用的生命周期
                        </a>
                        <ul>
                        </ul>
                      </li>
                      <li class="category">
                        <a href="../apps/contentSecurityPolicy.html">
                        内容安全策略
                        </a>
                        <ul>
                        </ul>
                      </li>
                      <li class="category">
                        <a href="../apps/app_codelab1_setup.html">
                        通过代码实验室学习
                        </a>
                        <ul>
                            <li><a href="../apps/app_codelab1_setup.html">1、设置开发环境</a>
                            </li>
                            <li><a href="../apps/app_codelab2_basic.html">2、创建基本应用</a>
                            </li>
                            <li><a href="../apps/app_codelab3_mvc.html">3、创建 MVC</a>
                            </li>
                            <li><a href="../apps/app_codelab5_data.html">4、保存和获取数据</a>
                            </li>
                            <li><a href="../apps/app_codelab6_lifecycle.html">5、管理应用的生命周期</a>
                            </li>
                            <li><a href="../apps/app_codelab7_useridentification.html">6、访问用户数据</a>
                            </li>
                            <li><a href="../apps/app_codelab8_webresources.html">7、访问网络资源</a>
                            </li>
                            <li><a href="../apps/app_codelab_10_publishing.html">8、发布应用</a>
                            </li>
                        </ul>
                      </li>
                  </ul>
                </li>
                <li class="submenu">在云端开发
                  <ul>
                      <li class="category">
                        <a href="../apps/offline_apps.html">
                        首先考虑离线
                        </a>
                        <ul>
                        </ul>
                      </li>
                      <li class="category">
                        <a href="../apps/app_external.html">
                        处理外部内容
                        </a>
                        <ul>
                        </ul>
                      </li>
                      <li class="category">
                        <a href="../apps/app_storage.html">
                        保存数据
                        </a>
                        <ul>
                        </ul>
                      </li>
                      <li class="category">
                        <a href="../apps/inform_users.html">
                        随时通知用户
                        </a>
                        <ul>
                        </ul>
                      </li>
                      <li class="category">
                        <a href="../apps/cloudMessaging.html">
                        云消息服务
                        </a>
                        <ul>
                        </ul>
                      </li>
                      <li class="category">
                        <a href="../apps/richNotifications.html">
                        丰富的通知
                        </a>
                        <ul>
                        </ul>
                      </li>
                      <li class="category">
                        <a href="../apps/app_identity.html">
                        用户认证
                        </a>
                        <ul>
                        </ul>
                      </li>
                  </ul>
                </li>
                <li class="submenu">使用低级系统服务
                  <ul>
                      <li class="category">
                        <a href="../apps/app_usb.html">
                        USB
                        </a>
                        <ul>
                        </ul>
                      </li>
                      <li class="category">
                        <a href="../apps/app_serial.html">
                        串行端口
                        </a>
                        <ul>
                        </ul>
                      </li>
                      <li class="category">
                        <a href="../apps/app_network.html">
                        网络通信
                        </a>
                        <ul>
                        </ul>
                      </li>
                      <li class="category">
                        <a href="../apps/app_bluetooth.html">
                        蓝牙
                        </a>
                        <ul>
                        </ul>
                      </li>
                  </ul>
                </li>
                <li class="submenu">MVC 架构和框架
                  <ul>
                      <li class="category">
                        <a href="../apps/app_frameworks.html">
                        关于 MVC 架构
                        </a>
                        <ul>
                        </ul>
                      </li>
                      <li class="category">
                        <a href="../apps/angular_framework.html">
                        使用 AngularJS 建立应用
                        </a>
                        <ul>
                        </ul>
                      </li>
                      <li class="category">
                        <a href="../apps/sencha_framework.html">
                        使用 SenchaJS 建立应用
                        </a>
                        <ul>
                        </ul>
                      </li>
                      <li class="category">
                        <a href="../apps/game_engines.html">
                        游戏引擎
                        </a>
                        <ul>
                        </ul>
                      </li>
                  </ul>
                </li>
                <li class="submenu">发布应用
                  <ul>
                      <li class="category">
                        <a href="../apps/publish_app.html">
                        发布您的应用
                        </a>
                        <ul>
                        </ul>
                      </li>
                      <li class="category">
                        <a href="../apps/chrome_apps_on_mobile.html">
                        在移动设备上运行 Chrome 应用
                        </a>
                        <ul>
                        </ul>
                      </li>
                      <li class="category">
                        <a href="../apps/google_wallet.html">
                        通过应用获利
                        </a>
                        <ul>
                        </ul>
                      </li>
                      <li class="category">
                        <a href="https://developer.chrome.com/webstore/one_time_payments">
                        一次性付款
                        </a>
                        <ul>
                        </ul>
                      </li>
                      <li class="category">
                        <a href="../apps/analytics.html">
                        Analytics（分析）
                        </a>
                        <ul>
                        </ul>
                      </li>
                  </ul>
                </li>
                <li class="submenu">Chrome 平台 API
                  <ul>
                      <li class="category">
                        <a href="../apps/api_index.html">
                        JavaScript API
                        </a>
                        <ul>
                        </ul>
                      </li>
                      <li class="category">
                        <a href="../apps/manifest.html">
                        清单文件格式
                        </a>
                        <ul>
                        </ul>
                      </li>
                      <li class="category">
                        <a href="../apps/tags/webview.html">
                        Webview 标签
                        </a>
                        <ul>
                        </ul>
                      </li>
                      <li class="category">
                        <a href="../apps/api_other.html">
                        网页 API
                        </a>
                        <ul>
                        </ul>
                      </li>
                      <li class="category">
                        <a href="../apps/app_deprecated.html">
                        禁用的网页特性
                        </a>
                        <ul>
                        </ul>
                      </li>
                  </ul>
                </li>
                <li class="submenu">帮助
                  <ul>
                      <li class="category">
                        <a href="../apps/samples.html">
                        示例
                        </a>
                        <ul>
                        </ul>
                      </li>
                      <li class="category">
                        <a href="../apps/faq.html">
                        常见问题
                        </a>
                        <ul>
                        </ul>
                      </li>
                      <li class="category">
                        <a href="https://groups.google.com/a/chromium.org/forum/#!forum/chromium-apps">
                        Google 网上论坛
                        </a>
                        <ul>
                        </ul>
                      </li>
                      <li class="category">
                        <a href="http://stackoverflow.com/questions/tagged/google-chrome-app">
                        Stack Overflow
                        </a>
                        <ul>
                        </ul>
                      </li>
                  </ul>
                </li>
            </ul>
          </li>
          <li class="pillar">
            <span class="toplevel">扩展程序</span>
            <ul class="expandee">
                <li class="submenu">了解基础知识
                  <ul>
                      <li class="category">
                        <a href="getstarted.html">
                        入门教程
                        </a>
                        <ul>
                        </ul>
                      </li>
                      <li class="category">
                        <a href="overview.html">
                        概述
                        </a>
                        <ul>
                        </ul>
                      </li>
                      <li class="category">
                        <a href="hosting_changes.html">
                        托管扩展程序的更改
                        </a>
                        <ul>
                        </ul>
                      </li>
                      <li class="category">
                        <a href="single_purpose.html">
                        扩展程序质量准测的常见问题
                        </a>
                        <ul>
                        </ul>
                      </li>
                      <li class="category">
                        <a href="event_pages.html">
                        事件页面
                        </a>
                        <ul>
                        </ul>
                      </li>
                      <li class="category">
                        <a href="content_scripts.html">
                        内容脚本
                        </a>
                        <ul>
                        </ul>
                      </li>
                      <li class="category">
                        <a href="activeTab.html">
                        activeTab 权限
                        </a>
                        <ul>
                        </ul>
                      </li>
                      <li class="category">
                        <a href="whats_new.html">
                        新增特性
                        </a>
                        <ul>
                        </ul>
                      </li>
                  </ul>
                </li>
                <li class="submenu">开发扩展程序
                  <ul>
                      <li class="category">
                        <a href="a11y.html">
                        辅助功能
                        </a>
                        <ul>
                        </ul>
                      </li>
                      <li class="category">
                        <a href="contentSecurityPolicy.html">
                        内容安全策略
                        </a>
                        <ul>
                        </ul>
                      </li>
                      <li class="category">
                        <a href="xhr.html">
                        跨站 XHR
                        </a>
                        <ul>
                        </ul>
                      </li>
                      <li class="category">
                        <a href="tut_debugging.html">
                        调试
                        </a>
                        <ul>
                        </ul>
                      </li>
                      <li class="category">
                        <a href="i18n.html">
                        国际化支持
                        </a>
                        <ul>
                        </ul>
                      </li>
                      <li class="category">
                        <a href="messaging.html">
                        消息传递
                        </a>
                        <ul>
                        </ul>
                      </li>
                      <li class="category">
                        <a href="tut_migration_to_manifest_v2.html">
                        迁移至清单文件版本 2
                        </a>
                        <ul>
                        </ul>
                      </li>
                      <li class="category">
                        <a href="tut_oauth.html">
                        OAuth
                        </a>
                        <ul>
                        </ul>
                      </li>
                  </ul>
                </li>
                <li class="submenu">发布扩展程序
                  <ul>
                      <li class="category">
                        <a href="hosting.html">
                        托管
                        </a>
                        <ul>
                        </ul>
                      </li>
                      <li class="category">
                        <a href="packaging.html">
                        打包
                        </a>
                        <ul>
                        </ul>
                      </li>
                      <li class="category">
                        <a href="https://developer.chrome.com/webstore/one_time_payments">
                        一次性付款
                        </a>
                        <ul>
                        </ul>
                      </li>
                      <li class="category">
                        <a href="autoupdate.html">
                        自动更新
                        </a>
                        <ul>
                        </ul>
                      </li>
                      <li class="category">
                        <a href="external_extensions.html">
                        其他部署选项
                        </a>
                        <ul>
                        </ul>
                      </li>
                      <li class="category">
                        <a href="tut_analytics.html">
                        Google Analytics（分析）
                        </a>
                        <ul>
                        </ul>
                      </li>
                      <li class="category">
                        <a href="themes.html">
                        发布主题
                        </a>
                        <ul>
                        </ul>
                      </li>
                  </ul>
                </li>
                <li class="submenu">Chrome 平台 API
                  <ul>
                      <li class="category">
                        <a href="api_index.html">
                        JavaScript API
                        </a>
                        <ul>
                        </ul>
                      </li>
                      <li class="category">
                        <a href="manifest.html">
                        清单文件格式
                        </a>
                        <ul>
                        </ul>
                      </li>
                      <li class="category">
                        <a href="api_other.html">
                        网页 API
                        </a>
                        <ul>
                        </ul>
                      </li>
                      <li class="category">
                        <a href="permission_warnings.html">
                        权限警告
                        </a>
                        <ul>
                        </ul>
                      </li>
                      <li class="category">
                        <a href="permissions.html">
                        可选权限
                        </a>
                        <ul>
                        </ul>
                      </li>
                      <li class="category">
                        <a href="match_patterns.html">
                        匹配表达式
                        </a>
                        <ul>
                        </ul>
                      </li>
                  </ul>
                </li>
                <li class="submenu">帮助
                  <ul>
                      <li class="category">
                        <a href="samples.html">
                        示例
                        </a>
                        <ul>
                        </ul>
                      </li>
                      <li class="category">
                        <a href="faq.html">
                        常见问题
                        </a>
                        <ul>
                        </ul>
                      </li>
                      <li class="category">
                        <a href="https://groups.google.com/a/chromium.org/forum/#!forum/chromium-extensions">
                        Google 网上论坛
                        </a>
                        <ul>
                        </ul>
                      </li>
                      <li class="category">
                        <a href="http://stackoverflow.com/tags/google-chrome-extension/info">
                        Stack Overflow
                        </a>
                        <ul>
                        </ul>
                      </li>
                  </ul>
                </li>
            </ul>
          </li>
        <li id="search">
          <img src="../static/images/search.png">
          <div class="expandee">
      
      <!-- override search styles set globally by site.css -->
      <style>.gsc-above-wrapper-area, .gsc-result-info {
        font-size: 11px;
      }
      .gs-webResult div, .gs-result div {
        line-height: initial;
      }
      .gs-webResult a, .gs-result a {
        text-decoration: none;
      }
      td.gcsc-branding-img-noclear, .gcsc-branding-img-noclear a {
        width: 51px;
        height: 15px;
        vertical-align: top;
      }
      .gsc-table-result, .gsc-thumbnail-inside, .gsc-url-top {
        padding: 0;
      }
      .gsc-control-cse tr, .gsc-control-cse td, .gsc-control-cse th {
       padding: inherit;
       border: none;
      }
      .gsc-control-cse {
        white-space: normal;
        border: none;
        padding: 0 1em;
      }
      #search .gsc-control-cse img {
        height: inherit;
        width: inherit;
      }
      .gsc-control-cse table {
        margin: initial;
      }
      .gsc-control-cse * {
        box-sizing: initial;
        -webkit-box-sizing: initial;
        -moz-box-sizing: initial;
      }
      #fatnav .expandee .gsc-control-cse a {
       padding: 0;
       color: inherit;
      }
      </style>
      
            <form id="chrome-docs-cse-search-form" action="https://www.google.com/cse">
              <input type="search" id="chrome-docs-cse-input" name="q" placeholder="What are you looking for?">
              <input type="hidden" name="cx" value="016591469675702421090:ddw412-4i6q" />
              <input type="hidden" name="ie" value="UTF-8" />
            </form>
            <gcse:searchresults-only gname="results"></gcse:searchresults-only>
          </div>
        </li>
      </ul>
      </nav>
          </header>

    <main id="gc-pagecontent" role="main">


<article>
  <div itemprop="articleBody" class="api">
    <h1>chrome.ttsEngine</h1>
    <table class="intro" id="intro">
      <tr>
        <td class="title">描述<!--@:-->：</td>
        <td>
            使用 <code>chrome.ttsEngine</code> API 在扩展程序中实现文字语音转换（TTS）引擎。如果您的扩展程序注册了该 API，当任何扩展程序或 Chrome 应用使用 <a href="tts.html">tts</a> 模块朗读时，它会收到事件，包含要朗读的内容以及其他参数。您的扩展程序可以使用任何可用的网络技术合成并输出语音，并向调用方发送事件报告状态。
                    <br>
        </td>
      </tr>
      <tr>
        <td class="title">可用版本<!--@:-->：</td>
        <td>
            <!--@Since-->从 Chrome 14<!--@.--> 开始支持。
            <br>
        </td>
      </tr>
      <tr>
        <td class="title">权限<!--@:-->：</td>
        <td>
            <span class="code">
            "ttsEngine"
                    </span>
            <br>
        </td>
      </tr>
    </table>
    <section>
      <h2 id="overview"><!--@Overview-->概述</h2>
      
      <p><!--@An extension can register itself as a speech engine. By doing so, it
      can intercept some or all calls to functions such as
      <a href=/extensions/tts#method-speak>tts.speak</a> and
      <a href=/extensions/tts#method-stop>tts.stop</a>
      and provide an alternate implementation.
      Extensions are free to use any available web technology
      to provide speech, including streaming audio from a server, HTML5 audio,
      Native Client, or Flash. An extension could even do something different
      with the utterances, like display closed captions in a pop-up window or
      send them as log messages to a remote server.-->
      扩展程序可以将自己注册为语音引擎，这样，它就能处理部分或所有诸如
      <a href="tts.html#method-speak">tts.speak</a> 和 <a href="tts.html#method-stop">tts.stop</a>
      的函数调用，提供替代的实现。扩展程序可以自由地使用任何可用的网络技术提供语音，包括来自服务器的音频流、HTML5 音频、Native Client 或
      Flash。扩展程序甚至可以做一些除朗读之外的事，例如在弹出式窗口中显示内容或者向远程服务器发送日志消息。
      </p>
      
      <h2 id="manifest"><!--@Manifest-->清单文件</h2>
      
      <p><!--@To implement a TTS engine, an extension must
      declare the "ttsEngine" permission and then declare all voices
      it provides in the extension manifest, like this:-->
      要实现 TTS 引擎，扩展程序必须在清单文件中声明 "ttsEngine"
      权限，并声明它提供的所有语音，如下所示：
      </p>
      
      <pre data-filename="manifest.json">
      {
        "name": "我的 TTS 引擎",
        "version": "1.0",
        <b>"permissions": ["ttsEngine"],
        "tts_engine": {
          "voices": [
            {
              "voice_name": "Alice",
              "lang": "en-US",
              "gender": "female",
              "event_types": ["start", "marker", "end"]
            },
            {
              "voice_name": "Pat",
              "lang": "en-US",
              "event_types": ["end"]
            }
          ]
        },</b>
        "background": {
          "page": "background.html",
          "persistent": false
        }
      }
      </pre>
      
      <p><!--@An extension can specify any number of voices.-->
      扩展程序可以指定任意数量的语音。
      </p>
      
      <p><!--@The <code>voice_name</code> parameter is required. The name should be
      descriptive enough that it identifies the name of the voice and the
      engine used. In the unlikely event that two extensions register voices
      with the same name, a client can specify the ID of the extension that
      should do the synthesis.-->
      <code>voice_name</code>
      参数是必选的，名称应该具有充分的描述性，标识使用的语音和引擎的名称。如果两个扩展程序注册了相同名称的语音（这种情况不太可能发生），客户端可以指定应该进行合成的扩展程序标识符。
      </p>
      
      <p><!--@The <code>gender</code> parameter is optional. If your voice corresponds
      to a male or female voice, you can use this parameter to help clients
      choose the most appropriate voice for their application.-->
      <code>gender</code>
      参数可选。如果您的语音对应于男性（"male"）或女性（"female"）语音，您可以使用该参数帮助客户端为应用程序选择最合适的语音。
      </p>
      
      <p><!--@The <code>lang</code> parameter is optional, but highly recommended.
      Almost always, a voice can synthesize speech in just a single language.
      When an engine supports more than one language, it can easily register a
      separate voice for each language. Under rare circumstances where a single
      voice can handle more than one language, it's easiest to just list two
      separate voices and handle them using the same logic internally. However,
      if you want to create a voice that will handle utterances in any language,
      leave out the <code>lang</code> parameter from your extension's manifest.-->
      <code>lang</code>
      参数可选，但是强烈建议包含这一参数。大部分情况下语音只能进行一种语言的语音合成。如果引擎支持不止一种语言，它只要注册两个单独的语音，并在内部用相同的逻辑处理。然而，如果您想创建一个可以处理任何语言的语音，可以在扩展程序的清单文件中省略
      <code>lang</code>参数。
      </p>
      
      <p><!--@Finally, the <code>event_types</code> parameter is required if the engine can
      send events to update the client on the progress of speech synthesis.
      At a minimum, supporting the <code>'end'</code> event type to indicate
      when speech is finished is highly recommended, otherwise Chrome cannot
      schedule queued utterances.-->
      最后，如果引擎可以发送事件通知客户端语音合成的进度，则必须设置
      <code>event_types</code> 参数。强烈建议至少应该支持
      <code>'end'</code> 事件类型指示朗读何时完成，否则 Chrome
      浏览器无法调度队列中的朗读。
      </p>
      
      <p class="note">
      <strong><!--@Note:-->注意：</strong><!--@ If your TTS engine does not support
      the <code>'end'</code> event type, Chrome cannot queue utterances
      because it has no way of knowing when your utterance has finished. To
      help mitigate this, Chrome passes an additional boolean <code>enqueue</code>
      option to your engine's onSpeak handler, giving you the option of
      implementing your own queueing.  This is discouraged because then
      clients are unable to queue utterances that should get spoken by different
      speech engines.-->如果您的 TTS 引擎不支持 <code>'end'</code>
      事件类型，Chrome
      浏览器就无法将朗读放入队列，因为它无法知道您的朗读何时结束。为了缓解这一问题，Chrome
      浏览器将向您的引擎的 onSpeak 事件处理函数传递布尔类型的
      <code>enqueue</code>
      选项，让您选择实现自己的队列。但是不建议您这么做，因为客户端将无法将其他语音引擎朗读的内容放入队列。
      </p>
      
      <p><!--@The possible event types that you can send correspond to the event types
      that the <code>speak()</code> method receives:-->
      您可以发送的可能的事件类型对应于 <code>speak()</code> 可以接受的事件类型：
      </p>
      
      <ul>
        <li><code>'start'</code><!--@: The engine has started speaking the utterance.-->：引擎开始朗读。
        <li><code>'word'</code><!--@: A word boundary was reached. Use
                <code>event.charIndex</code> to determine the current speech
                position.-->：遇到单词边界。使用
                <code>event.charIndex</code> 确定当前朗读位置。
        <li><code>'sentence'</code><!--@: A sentence boundary was reached. Use
                <code>event.charIndex</code> to determine the current speech
                position.-->：遇到句子边界。使用
                <code>event.charIndex</code> 确定当前朗读位置。
        <li><code>'marker'</code><!--@: An SSML marker was reached. Use
                <code>event.charIndex</code> to determine the current speech
                position.-->：遇到 SSML 标记。使用
                <code>event.charIndex</code> 确定当前朗读位置。
        <li><code>'end'</code><!--@: The engine has finished speaking the utterance.-->：引擎已完成朗读。
        <li><code>'error'</code><!--@: An engine-specific error occurred and
                this utterance cannot be spoken.
                Pass more information in <code>event.errorMessage</code>.-->：发生了引擎特定的错误，不能开始朗读。有关细节请检查
                <code>event.errorMessage</code>。
      </ul>
      
      <p><!--@The <code>'interrupted'</code> and <code>'cancelled'</code> events are
      not sent by the speech engine; they are generated automatically by Chrome.-->
      <code>'interrupted'</code> 和 <code>'cancelled'</code>
      事件并不是由语音引擎发送，而是由 Chrome 浏览器自动生成。
      </p>
      
      <p><!--@Text-to-speech clients can get the voice information from your
      extension's manifest by calling
      <a href=/extensions/tts#method-getVoices>tts.getVoices</a>,
      assuming you've registered speech event listeners as described below.-->
      如果您已经处理了如下描述的语音事件的话，文本语音转换客户端可以通过调用
      <a href="tts.html#method-getVoices">tts.getVoices</a> 从您的扩展程序的清单文件获取语音信息。
      </p>
      
      <h2 id="handling_speech_events"><!--@Handling speech events-->处理语音事件</h2>
      
      <p><!--@To generate speech at the request of clients, your extension must
      register listeners for both <code>onSpeak</code> and <code>onStop</code>,
      like this:-->
      要在收到客户端的请求后开始朗读，您的扩展程序必须同时处理
      <code>onSpeak</code> 和 <code>onStop</code> 事件，如下所示：
      </p>
      
      <pre>var speakListener = function(utterance, options, sendTtsEvent) {
        sendTtsEvent({'event_type': 'start', 'charIndex': 0})
      
        // （开始朗读）
      
        sendTtsEvent({'event_type': 'end', 'charIndex': utterance.length})
      };
      
      var stopListener = function() {
        // （停止所有朗读）
      };
      
      chrome.ttsEngine.onSpeak.addListener(speakListener);
      chrome.ttsEngine.onStop.addListener(stopListener);</pre>
      
      <p class="warning">
      <b><!--@Important:-->重要提示：</b><!--@
      If your extension does not register listeners for both
      <code>onSpeak</code> and <code>onStop</code>, it will not intercept any
      speech calls, regardless of what is in the manifest.-->如果您的扩展程序不同时处理
      <code>onSpeak</code> 和 <code>onStop</code>
      事件，它不会收到任何语音调用，无论清单文件中如何描述。
      </p>
      
      <p><!--@The decision of whether or not to send a given speech request to an
      extension is based solely on whether the extension supports the given voice
      parameters in its manifest and has registered listeners
      for <code>onSpeak</code> and <code>onStop</code>. In other words,
      there's no way for an extension to receive a speech request and
      dynamically decide whether to handle it.-->
      是否向扩展程序发送语音请求完全取决于扩展程序是否支持清单文件中指定的语音参数以及是否已经处理
      <code>onSpeak</code> 和 <code>onStop</code>
      事件。换句话说，没有办法使扩展程序先接收语音事件再动态地决定是否处理。
      </p>
    </section>
    <section id="toc">
    <h2><!--@Summary-->摘要</h2>
    <table class="api-summary">
      <tr>
        <tr><th colspan="2"><!--@Events-->事件</th></tr>
          <tr><td><a href="ttsEngine.html#event-onSpeak">onSpeak</a></td></tr>
          <tr><td><a href="ttsEngine.html#event-onStop">onStop</a></td></tr>
          <tr><td><a href="ttsEngine.html#event-onPause">onPause</a></td></tr>
          <tr><td><a href="ttsEngine.html#event-onResume">onResume</a></td></tr>
    </table>
    </section>
    <section>
      <div class="api-reference">
          <h2 id="events"><!--@Events-->事件</h2>
            <div>
              <h3 id="event-onSpeak">onSpeak</h3>
              <div class="description">
            <p>
                  当用户发出 <a href="tts.html#method-speak">tts.speak</a> 调用并且扩展程序的清单文件中的任何一种语音首先匹配 options 对象时产生。
                </p>      <tr><td>
                  <div>
                    <h4
                        title="">addListener
                    </h4>
                    <div class="summary uncapitalize">
                    <code class="prettyprint">
                    chrome.ttsEngine.onSpeak.addListener(<span>function callback</span>)
                    </code>
                    </div>
                    <div class="description">
                      <table class="innerTable">
                        <tr><th colspan="3"><!--@Parameters-->参数</th></tr>
                          <tr id="property-onSpeak-callback">
                            <td>function</td>
                            <td>
                                callback</td>
                            <td>
                            
                                <p>
                                    <!--@The <em>callback</em> parameter should be a function
                                    that looks like this:-->
                                    <em>callback</em> 参数应该是一个如下形式的函数：
                                </p>
                              <code class="prettyprint">function(string utterance, object options, function sendTtsEvent) <span class="subdued">{...}</span>;</code>
                                <table class="innerTable">
                                  <tr id="property-onSpeak-utterance">
                                    <td>string</td>
                                    <td>
                                        utterance</td>
                                    <td>
                                    
                                    <p>
                                      要朗读的文本，既可以是纯文本，也可以是完整的、形式正确的 SSML 文档。如果您的引擎不支持 SSML，您应该忽略所有 XML 标签只朗读文本。这一参数的长度确保不超过 32 768 个字符。如果您的引擎不支持一次性朗读那么多内容，您应该将朗读分成一小段一小段，并放入内部队列，而不是返回错误。
                                    </p></td>
                                  </tr>
                                  <tr id="property-onSpeak-options">
                                    <td>object</td>
                                    <td>
                                        options</td>
                                    <td>
                                    
                                    <p>
                                      <a href="tts.html#method-speak">tts.speak</a> 方法指定的选项。
                                    </p>  <table class="innerTable">
                                        <tr id="property-options-voiceName">
                                          <td>string</td>
                                          <td><span class="optional"><!--@(optional)-->（可选）</span><br>
                                              voiceName</td>
                                          <td>
                                          
                                          <p>
                                            用来合成的语音名称。
                                          </p></td>
                                        </tr><tr id="property-options-lang">
                                          <td>string</td>
                                          <td><span class="optional"><!--@(optional)-->（可选）</span><br>
                                              lang</td>
                                          <td>
                                          
                                          <p>
                                            用于合成的语言，以<em>语言</em>-<em>区域</em>的形式。例如：'zh-CN'、'en'、'en-US'、'en-GB'。
                                          </p></td>
                                        </tr><tr id="property-options-gender">
                                          <td>enum of <code>"male"</code>, or <code>"female"</code></td>
                                          <td><span class="optional"><!--@(optional)-->（可选）</span><br>
                                              gender</td>
                                          <td>
                                          
                                          <p>
                                            语音合成所使用的性别，"male" 表示男性，"female" 表示女性。
                                          </p></td>
                                        </tr><tr id="property-options-rate">
                                          <td>double</td>
                                          <td><span class="optional"><!--@(optional)-->（可选）</span><br>
                                              rate</td>
                                          <td>
                                          
                                          <p>
                                            朗读速率，相对于这一语音的默认速率。1.0 表示默认速率，通常为每分钟 180 至 220 个单词。2.0 表示快一倍，而 0.5 是默认速率的一半。这一值确保在 0.1 和 10.0 之间（包括 0.1 和 10.0），如果语音不支持这一范围内的所有速率，不要返回错误，而是限制在语音支持范围内的速率。
                                          </p></td>
                                        </tr><tr id="property-options-pitch">
                                          <td>double</td>
                                          <td><span class="optional"><!--@(optional)-->（可选）</span><br>
                                              pitch</td>
                                          <td>
                                          
                                          <p>
                                            指定 0 到 2 之间（包括 0 和 2）的声调，0 表示最低，2 表示最高，1.0 对应于语音的默认声调。
                                          </p></td>
                                        </tr><tr id="property-options-volume">
                                          <td>double</td>
                                          <td><span class="optional"><!--@(optional)-->（可选）</span><br>
                                              volume</td>
                                          <td>
                                          
                                          <p>
                                            0 到 1 之间（包括 0 和 1）的朗读音量，0 为最低，1 为最高，默认为 1.0。
                                          </p></td>
                                        </tr>
                                      </table>
                                    </td>
                                  </tr>
                                  <tr id="property-onSpeak-sendTtsEvent">
                                    <td>function</td>
                                    <td>
                                        sendTtsEvent</td>
                                    <td>
                                    
                                    <p>
                                      调用这一函数，发送语音合成过程中发生的事件。
                                    </p>    <p>
                                            <!--@The <em>sendTtsEvent</em> parameter should be a function
                                            that looks like this:-->
                                            <em>sendTtsEvent</em> 参数应该是一个如下形式的函数：
                                        </p>
                                      <code class="prettyprint">function(    <a href="tts.html#type-TtsEvent">tts.TtsEvent</a> event) <span class="subdued">{...}</span>;</code>
                                        <table class="innerTable">
                                          <tr id="property-sendTtsEvent-event">
                                            <td>    <a href="tts.html#type-TtsEvent">tts.TtsEvent</a></td>
                                            <td>
                                                event</td>
                                            <td>
                                            
                                            <p>
                                              来自文字语音转换引擎的事件，表示朗读状态。
                                            </p></td>
                                          </tr>
                                        </table>
                                    </td>
                                  </tr>
                                </table>
                            </td>
                          </tr>
                      </table>
                    </div>
                  </div>
                  </td></tr>
              </div>
            </div>
            <div>
              <h3 id="event-onStop">onStop</h3>
              <div class="description">
            <p>
                  当发出 <a href="tts.html#method-stop">tts.stop</a> 调用时发生，扩展程序可能正在朗读。如果扩展程序收到这一事件但是朗读已经结束，它应该什么都不做（而不是产生错误）。如果语音正处于暂停状态，它应该取消暂停状态。
                </p>      <tr><td>
                  <div>
                    <h4
                        title="">addListener
                    </h4>
                    <div class="summary uncapitalize">
                    <code class="prettyprint">
                    chrome.ttsEngine.onStop.addListener(<span>function callback</span>)
                    </code>
                    </div>
                    <div class="description">
                      <table class="innerTable">
                        <tr><th colspan="3"><!--@Parameters-->参数</th></tr>
                          <tr id="property-onStop-callback">
                            <td>function</td>
                            <td>
                                callback</td>
                            <td>
                            
                                <p>
                                    <!--@The <em>callback</em> parameter should be a function
                                    that looks like this:-->
                                    <em>callback</em> 参数应该是一个如下形式的函数：
                                </p>
                              <code class="prettyprint">function() <span class="subdued">{...}</span>;</code>
                            </td>
                          </tr>
                      </table>
                    </div>
                  </div>
                  </td></tr>
              </div>
            </div>
            <div>
              <h3 id="event-onPause">onPause</h3>
              <div class="description">
                <p class="availability">
                  <!--@Since-->从 Chrome 29<!--@.--> 开始支持。
                </p>
            <p>
                  可选：如果引擎支持暂停事件，它应该暂停正在朗读的内容（如果有的话），直到它接收到恢复或停止事件。注意停止事件还应该清除暂停状态。
                </p>      <tr><td>
                  <div>
                    <h4
                        title="">addListener
                    </h4>
                    <div class="summary uncapitalize">
                    <code class="prettyprint">
                    chrome.ttsEngine.onPause.addListener(<span>function callback</span>)
                    </code>
                    </div>
                    <div class="description">
                      <table class="innerTable">
                        <tr><th colspan="3"><!--@Parameters-->参数</th></tr>
                          <tr id="property-onPause-callback">
                            <td>function</td>
                            <td>
                                callback</td>
                            <td>
                            
                                <p>
                                    <!--@The <em>callback</em> parameter should be a function
                                    that looks like this:-->
                                    <em>callback</em> 参数应该是一个如下形式的函数：
                                </p>
                              <code class="prettyprint">function() <span class="subdued">{...}</span>;</code>
                            </td>
                          </tr>
                      </table>
                    </div>
                  </div>
                  </td></tr>
              </div>
            </div>
            <div>
              <h3 id="event-onResume">onResume</h3>
              <div class="description">
                <p class="availability">
                  <!--@Since-->从 Chrome 29<!--@.--> 开始支持。
                </p>
            <p>
                  可选：如果引擎支持暂停事件，它也应该支持恢复事件，继续当前朗读的内容（如果有的话）。注意停止事件还应该清除暂停状态。
                </p>      <tr><td>
                  <div>
                    <h4
                        title="">addListener
                    </h4>
                    <div class="summary uncapitalize">
                    <code class="prettyprint">
                    chrome.ttsEngine.onResume.addListener(<span>function callback</span>)
                    </code>
                    </div>
                    <div class="description">
                      <table class="innerTable">
                        <tr><th colspan="3"><!--@Parameters-->参数</th></tr>
                          <tr id="property-onResume-callback">
                            <td>function</td>
                            <td>
                                callback</td>
                            <td>
                            
                                <p>
                                    <!--@The <em>callback</em> parameter should be a function
                                    that looks like this:-->
                                    <em>callback</em> 参数应该是一个如下形式的函数：
                                </p>
                              <code class="prettyprint">function() <span class="subdued">{...}</span>;</code>
                            </td>
                          </tr>
                      </table>
                    </div>
                  </div>
                  </td></tr>
              </div>
            </div>
      </div>
        <h2 id="samples"><!--@Sample -->示例扩展程序</h2>
        <ul>
          <li><strong><a href="samples.html#console-tts-engine">Console TTS Engine</a></strong>
          &ndash; A "silent" TTS engine that prints text to a small window rather than synthesizing speech.
      </li>
        </ul>
    </section>

    <br>
    <footer id="cc-info">
      <!--<button id="send-feedback" class="google-button" data-feedback>Send Feedback</button>-->
      <!--p class="last-updated">Last updated August 2, 2013.</p-->
      <p class="cc-logo">
      该网页翻译自
      <a href="https://developer.chrome.com/extensions/">Google Chrome Extensions</a>
      与
      <a href="https://developer.chrome.com/apps/">Google Chrome Apps</a>，遵循
      <a href="http://creativecommons.org/licenses/by/3.0/">Creative Commons Attribution 3.0 License <img src="../static/images/cc_by.png" alt="Licensed Creative Commons by Attribution"></a></p>
    </footer>
  </div>
</article>
    </main>

    <footer id="gc-footer" role="contentinfo" class="span-full">
      <div class="g-section g-tpl-50-50">
        <div class="g-unit g-first">
          <nav class="links">
            <a href="https://code.google.com/p/crxdoczh/">crxdoczh 项目主页</a>
            <a href="https://code.google.com/p/crxdoczh/issues/entry?template=%E7%BD%91%E7%AB%99%E5%8F%8D%E9%A6%88">发送反馈</a>
            <a href="https://plus.google.com/communities/105384952265487436177">Google+ 社群</a>
          </nav>
        </div>
        <div class="g-unit g-last">
          <div id="social-buttons">
            <div data-size="small" data-annotation="bubble" class="g-plusone"></div>
            <a rel="publisher" target="_blank" href="https://plus.google.com/+Crxdoc-zhAppspot?prsrc=3" data-g-label="plus" data-g-event="nav-subfooter"><!--@Add us on-->在 <span class="element-invisible">Google+</span><img src="https://ssl.gstatic.com/images/icons/gplus-16.png" data-g-label="plus" data-g-event="nav-subfooter" alt=""> 上关注我们</a>
          </div>
        </div>
      </div>
    </footer>

    <script src="../static/js/fatnav.js"></script>
    <script src="../static/js/article.js"></script>
    <script src="../static/js/prettify.js"></script>
    <script src="../static/js/search.js"></script>
    <script src="../static/js/site.js"></script>
  </body>
</html>
